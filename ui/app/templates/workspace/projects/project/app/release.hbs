{{page-title (concat "Release" " v" @model.sequence)}}

{{#if (not-eq this.target.currentRouteName "workspace.projects.project.app.release.resource")}}
  <PanelHeader @artifact="release" @sequence={{@model.sequence}}>
    <:actions>
      {{#if @isLatest}}
        <button class="button button--primary" type="button">
          <span>{{@model.release.url}}</span>
          <Pds::Icon @type="exit" class="icon" />
        </button>
      {{/if}}
    </:actions>
  </PanelHeader>

  <Section @isExpandable={{false}}>
    <:heading>{{t "page.build.overview.heading"}}</:heading>
    <:body>
      <StatusReportMetaTable @model={{@model}} @artifactType="Build">
        <tr>
          <th scope="row">Status</th>
          <td>
            <Pds::Icon @type={{icon-for-component @model.component.name}} class="icon" />
            <span>Released on <b>{{component-name @model.component.name}}</b>
              <small>{{date-format-distance-to-now @model.status.startTime.seconds}}</small>
            </span>
          </td>
        </tr>
        {{#if @model.preload.jobDataSourceRef.git.commit}}
        <tr>
          <th scope="row">Commit</th>
          <td>
            <GitCommit @commit={{@model.preload.jobDataSourceRef.git.commit}}/>
          </td>
        </tr>
        {{/if}}
      </StatusReportMetaTable>
    </:body>
  </Section>

  {{#if @model.statusReport.resourcesList.length}}
    <Section>
      <:heading>{{t "page.release.resources.heading"}}</:heading>
      <:body>
        <ResourcesTable
          @resources={{@model.statusReport.resourcesList}}
          @route="workspace.projects.project.app.release.resource"
        >
          <:caption>
            {{t "page.release.resources.table-caption" htmlSafe=true}}
          </:caption>
        </ResourcesTable>
      </:body>
    </Section>
  {{/if}}

  <Section>
    <:heading>{{t "page.release.logs.heading"}}</:heading>
    <:body>
      <OperationLogs @jobId={{@model.jobId}} />
    </:body>
  </Section>
{{/if}}

{{outlet}}
