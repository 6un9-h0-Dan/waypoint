---
layout: docs
page_title: 'Lifecycle: Build'
sidebar_title: Build
description: |-
  TODO
---

# Build

A **build** takes application source and converts it to an _artifact_.

An artifact is the packaged form of an application required for deployment on
your target platform: a container image, VM image, or maybe a simple zip file.
The build process may also include an optional **push** operation to push
the built artifact to a registry so that it is available for the deployment
platform.

A build is triggered during a `waypoint up` or using the dedicated
`waypoint build` command.

## Configuration

The build is configured using the `build` stanza within an `app`:

```
app "my-app" {
  build {
    use "docker" {}
  }
}
```

### Build Methods

Waypoint includes these builtin plugins to build a Docker container for your app.

- Docker Build
- Cloud Native Buildpacks

You can also create a [plugin](/plugins) to extend Waypoint with your own builder.

### Choosing How to Build Your App

While both Docker Build and Cloud Native Buildpacks create Docker containers, each creates those images in different ways.

#### Docker Build

**Example configuration**

```
app "my-app" {
  build {
    use "docker" {}
  }
}
```

Most developers using Waypoint for current applications will likely want to use Docker Build (`docker build`) for creating their applications' Docker containers. When you use the `docker build` method in your Waypoint Confg file (waypoint.hcl), Waypoint will instruct Docker to create the container using the `docker build` [Docker command](https://docs.docker.com/engine/reference/commandline/build/).

When building your app's container, Docker will use a [Dockerfile](https://docs.docker.com/engine/reference/builder/) as a set of instructions for how to configure the container. Dockerfiles may include information such as which base operating system to use in the container, directory structure, etc.

[Learn how to use Docker Build in your app](/plugins/docker)

#### Cloud Native Buildpacks

**Example configuration**

```
app "my-app" {
  build {
    use "pack" {}
  }
}
```

Cloud Native Buildpacks are a very quick and easy way to get started creating a containerized application. Cloud Native Buildpacks are a good option for when you do not need to use fine-grained settings for the container or if you want to quickly try out Waypoint and learn how it works.

## Registry

A build may optionally specify a registry to push the built artifact to.
This is sometimes required so that the build artifact is accessible to the
deployment platform.

If a registry is specified, the deployment step will use the artifact
in the registry. If a registry is not specified, the deployment step will
use the artifact that is the result of the build.

### Situations for a Registry

**An example of a situation requiring a registry:** Kubernetes deployments
need access to the Docker image that is built, but a Docker build process often
produces a local Docker image. The registry configuration is used to push
the locally built Docker image to the remote registry.

**An example of a situation that does not require a registry:** AMIs (Amazon
Machine Images) are registered directly with Amazon and are never local
artifacts. Therefore, a separate registry configuration is not required since
the build/registry phases are one and the same.

### Registry Configuration

Registries are configured in the `registry` stanza within a build. These
must specify a plugin that is capable of providing registry capabilities.

```
build {
  use "docker" {}

  registry {
    use "docker" {
      image = "example.com/my-app"
      tag   = gitrefpretty()
    }
  }
}
```
